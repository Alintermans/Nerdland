<!DOCTYPE html>
<html>
<head>
	<title>Four Quadrant Chart with Live Updates</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
	<style>
		.container {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			grid-template-rows: repeat(2, 1fr);
			grid-gap: 20px;
			height: 100vh;
		}

		.chart-container {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: 10px;
			border: 1px solid #ccc;
		}

		h1, h2 {
			text-align: center;
			margin: 0;
			margin-bottom: 10px;
		}

		button {
			margin: 10px;
			padding: 5px 10px;
			border: none;
			border-radius: 5px;
			background-color: #007bff;
			color: #fff;
			cursor: pointer;
			transition: background-color 0.3s ease;
		}

		button:hover {
			background-color: #0062cc;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="chart-container">
			<h1>Chart 1</h1>
			<h2>Subtitle 1</h2>
			<canvas id="chart1"></canvas>
			<div>
				<button id="btn1">Button 1</button>
				<button id="btn2">Button 2</button>
				<button id="btn3">Button 3</button>
			</div>
		</div>
		<div class="chart-container">
			<h1>Chart 2</h1>
			<h2>Subtitle 2</h2>
			<canvas id="chart2"></canvas>
			<div>
				<button id="btn4">Button 4</button>
				<button id="btn5">Button 5</button>
				<button id="btn6">Button 6</button>
			</div>
		</div>
		<div class="chart-container">
			<h1>Chart 3</h1>
			<h2>Subtitle 3</h2>
			<canvas id="chart3"></canvas>
			<div>
				<button id="btn7">Button 7</button>
				<button id="btn8">Button 8</button>
				<button id="btn9">Button 9</button>
			</div>
		</div>
		<div class="chart-container">
			<h1>Chart 4</h1>
			<h2>Subtitle 4</h2>
			<canvas id="chart4"></canvas>
			<div>
				<button id="btn10">Button 10</button>
				<button id="btn11">Button 11</button>
				<button id="btn12">Button 12</button>
			</div>
		</div>
	</div>

	<script>
				// Initialize the charts
                var chart1 = createChart('chart1', 'Chart 1', '#007bff');
		var chart2 = createChart('chart2', 'Chart 2', '#dc3545');
		var chart3 = createChart('chart3', 'Chart 3', '#ffc107');
		var chart4 = createChart('chart4', 'Chart 4', '#28a745');

		// Connect to the EventSource and update the charts with new data
		var source = new EventSource('/stream');
		source.onmessage = function(event) {
			var data = JSON.parse(event.data);
			chart1.data.datasets[0].data = data.value_1;
			chart1.data.labels = [...Array(data.value_1.length).keys()];
			chart1.update();
			chart2.data.datasets[0].data = data.value_2;
			chart2.data.labels = [...Array(data.value_2.length).keys()];
			chart2.update();
			chart3.data.datasets[0].data = data.value_3;
			chart3.data.labels = [...Array(data.value_3.length).keys()];
			chart3.update();
			chart4.data.datasets[0].data = data.value_4;
			chart4.data.labels = [...Array(data.value_4.length).keys()];
			chart4.update();
		};

		// Helper function to create a new line chart
		function createChart(canvasId, title, color) {
			var ctx = document.getElementById(canvasId);
			var chart = new Chart(ctx, {
				type: 'line',
				data: {
				labels: ['1', '2', '3', '4', '5', '6'],
				datasets: [{
					label: title,
					data: [12, 19, 3, 5, 2, 3],
					borderWidth: 1,
					borderColor: color,
					fill: false
				}]
				},
				options: {
					maintainAspectRatio: true,
					scales: {
						x: {
							grid: {
								display: false
							},
							ticks: {
								display: false //this will remove only the label
							}
						},
						y: {
							grid: {
								display: false
							},
							ticks: {
								beginAtZero: true
							},
							min: 0,
							max: 1024
						}
					},
					layout: {
						padding: 20
					},
					elements: {
						point:{
							radius: 0
						}
					},
					animation: {
					duration: 0
				}

				}
			});
			return chart;
		}
	</script>

  </body>
</html>